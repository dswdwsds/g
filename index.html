<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Services | Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <nav class="nav-bar">
        <div class="user-info" id="userInfo">
            <!-- Auth Content -->
        </div>
        <div class="logo" style="font-family: var(--font-en); font-weight: 800; color: var(--primary);">PRO GS</div>
    </nav>

    <main class="container" style="padding-top: 80px;">
        <header class="hero">
            <h1>Professional GS</h1>
            <p>Ø§Ø±ÙØ¹ Ù…Ø³ØªÙˆØ§Ùƒ ÙÙŠ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø¨Ø³Ø±Ø¹Ø© ÙˆØ£Ù…Ø§Ù† Ù…Ø¹ Ø®Ø¯Ù…Ø§ØªÙ†Ø§ Ø§Ù„Ù…ØªØ®ØµØµØ© ÙˆØ§Ù„Ù…ØªÙ…ÙŠØ²Ø©.</p>
        </header>

        <section class="services">
            <a href="bounty-rush.html" class="service-card">
                <h2>Bounty Rush</h2>
                <p>Ø®Ø¯Ù…Ø§Øª ØªÙ„ÙÙŠÙ„ Ø­Ø³Ø§Ø¨Ø§Øª ÙˆÙ†Ù‚Ø§Ø· Ø§Ù„Ø´Ø®ØµÙŠØ§Øª Ù„Ø£Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„ØªØ­Ù…Ù„ ÙˆØ§Ù„Ù‚ÙˆØ©.</p>
                <span>Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ø®Ø¯Ù…Ø© â†</span>
            </a>

            <a href="#" class="service-card" style="opacity: 0.5; pointer-events: none;">
                <h2>Ù‚Ø±ÙŠØ¨Ø§Ù‹..</h2>
                <p>Ø®Ø¯Ù…Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù‚Ø§Ø¯Ù…Ø© Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© ÙˆØ§Ø³Ø¹Ø© Ù…Ù† Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©.</p>
                <span>Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ø¬Ø¯Ø§Ù‹</span>
            </a>
        </section>

        <section class="reviews-section">
            <h2 style="text-align: center; font-size: 2rem; margin-bottom: 30px;">Ø¢Ø±Ø§Ø¡ Ø¹Ù…Ù„Ø§Ø¦Ù†Ø§ Ø§Ù„Ø±Ø§Ø¶ÙŠÙ† â­</h2>
            <div class="reviews-grid" id="reviewsGrid">
                <p style="text-align: center; color: var(--text-dim); grid-column: 1/-1;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª...</p>
            </div>
        </section>
    </main>

    <footer>
        <p>Â© 2026 Professional Game Services. All rights reserved.</p>
    </footer>

    <script type="module">
        import { auth, onAuthStateChanged } from './firebase-config.js';
        import { login, logout, isWorker, listenToWorkers, listenToRecentReviews, getUserRole } from './app.js';


        const refreshUserUI = () => {
            const user = auth.currentUser;
            if (user) {
                const userRole = getUserRole(user.email);
                const isStaff = !!userRole;
                const workerBadge = isStaff ? `<span class="worker-badge">${userRole === 'admin' ? 'Admin ğŸ‘‘' : 'Staff ğŸ›¡ï¸'}</span>` : '';
                const workersLink = isStaff
                    ? '<a href="workers.html" class="dropdown-item">âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>'
                    : '';

                userInfo.innerHTML = `
                    <div class="user-dropdown">
                        <div class="user-profile">
                            <img src="${user.photoURL}" class="user-avatar">
                            <span class="user-name">${user.displayName} ${workerBadge}</span>
                        </div>
                        <div class="dropdown-menu">
                            ${workersLink}
                            <a href="#" class="dropdown-item" onclick="handleLogout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a>
                        </div>
                    </div>
                `;
            } else {
                userInfo.innerHTML = `<button class="auth-btn" id="loginBtn">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</button>`;
                const btn = document.getElementById('loginBtn');
                if (btn) btn.onclick = login;
            }
        };

        listenToWorkers(() => refreshUserUI());
        onAuthStateChanged(auth, () => refreshUserUI());

        window.handleLogout = logout;

        const reviewsGrid = document.getElementById('reviewsGrid');
        listenToRecentReviews((reviews) => {
            reviewsGrid.innerHTML = '';
            if (reviews.length === 0) {
                reviewsGrid.innerHTML = '<p style="text-align: center; color: var(--text-dim); grid-column: 1/-1;">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø¨Ø¹Ø¯. ÙƒÙ† Ø£ÙˆÙ„ Ù…Ù† ÙŠÙ‚ÙŠÙ…Ù†Ø§!</p>';
                return;
            }

            reviews.forEach(review => {
                const card = document.createElement('div');
                card.className = 'review-card';
                const stars = 'â­'.repeat(review.rating);

                card.innerHTML = `
                    <div class="review-header">
                        <img src="${review.userAvatar || 'https://via.placeholder.com/40'}" class="review-avatar">
                        <div>
                            <div class="review-name">${review.userName.split(' ')[0]}</div>
                            <div class="review-stars">${stars}</div>
                        </div>
                    </div>
                    <div class="review-text">"${review.review || 'Ø®Ø¯Ù…Ø© Ù…Ù…ØªØ§Ø²Ø© ÙˆØ³Ø±ÙŠØ¹Ø© Ø¬Ø¯Ø§Ù‹ØŒ Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ…!'}"</div>
                    <div style="font-size: 0.7rem; color: var(--text-dim); margin-top:10px; text-align:left;">
                        ${review.ratedAt ? new Date(review.ratedAt.seconds * 1000).toLocaleDateString('ar-EG') : ''}
                    </div>
                `;
                reviewsGrid.appendChild(card);
            });
        });
    </script>

</body>

</html>