<!DOCTYPE html>
<html lang="ar">

<head>
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.firebaseapp.com https://*.googleapis.com https://apis.google.com https://www.gstatic.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://www.gstatic.com; img-src 'self' data: https://*.discordapp.com https://*.discordapp.net https://*.googleusercontent.com https://lh3.googleusercontent.com https://via.placeholder.com https://ui-avatars.com https://*.ibb.co; font-src 'self' https://fonts.gstatic.com; connect-src 'self' https://*.firebaseio.com https://*.googleapis.com https://discord.com https://*.discordapp.com https://www.gstatic.com https://api.imgbb.com; frame-src 'self' https://*.firebaseapp.com https://*.googleapis.com https://apis.google.com;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Professional Game Services (PRO GS) - Ø£ÙØ¶Ù„ Ø®Ø¯Ù…Ø§Øª ØªØ·ÙˆÙŠØ± Ø´Ø®ØµÙŠØ§Øª Bounty Rush ÙˆØ´Ø­Ù† Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø¨Ø£Ù…Ø§Ù† ÙˆØ³Ø±Ø¹Ø©.">
    <meta property="og:title" content="Professional Game Services | PRO GS">
    <meta property="og:description" content="Ø§Ø±ØªÙ‚Ù Ø¨Ù…Ø³ØªÙˆØ§Ùƒ ÙÙŠ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ù…Ø¹ Ø®Ø¯Ù…Ø§ØªÙ†Ø§ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© ÙˆØ§Ù„Ù…ÙˆØ«ÙˆÙ‚Ø©.">

    <title>Professional Game Services | PRO GS - Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</title>

    <!-- Optimized Font Loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&family=Noto+Sans+Arabic:wght@400;700;800&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="style.css">
    <style>
        .reviews-section {
            padding: 80px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .reviews-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }

        .review-card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 15px;
            animation: fadeIn 0.6s ease-out both;
        }

        .review-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.08);
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .review-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 2px solid var(--primary);
            object-fit: cover;
        }

        .review-name {
            font-weight: 800;
            color: #fff;
            font-size: 1rem;
        }

        .review-stars {
            color: #ffd700;
            font-size: 0.9rem;
            margin-top: 2px;
        }

        .review-text {
            color: var(--text-dim);
            font-size: 0.95rem;
            line-height: 1.6;
            font-style: italic;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>

    <nav class="nav-bar">
        <div class="user-info" id="userInfo">
            <!-- Auth Content -->
        </div>
        <a href="index.html" class="logo"
            style="text-decoration: none; font-family: var(--font-en); font-weight: 800; color: var(--primary);">PRO
            GS</a>
    </nav>

    <main class="container" style="padding-top: 80px;">
        <header class="hero">
            <h1>Professional GS</h1>
            <p>Ø§Ø±ÙØ¹ Ù…Ø³ØªÙˆØ§Ùƒ ÙÙŠ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø¨Ø³Ø±Ø¹Ø© ÙˆØ£Ù…Ø§Ù† Ù…Ø¹ Ø®Ø¯Ù…Ø§ØªÙ†Ø§ Ø§Ù„Ù…ØªØ®ØµØµØ© ÙˆØ§Ù„Ù…ØªÙ…ÙŠØ²Ø©.</p>
        </header>

        <section class="services">
            <a href="bounty-rush.html" class="service-card">
                <h2>Bounty Rush</h2>
                <p>Ø®Ø¯Ù…Ø§Øª ØªÙ„ÙÙŠÙ„ Ø­Ø³Ø§Ø¨Ø§Øª ÙˆÙ†Ù‚Ø§Ø· Ø§Ù„Ø´Ø®ØµÙŠØ§Øª Ù„Ø£Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„ØªØ­Ù…Ù„ ÙˆØ§Ù„Ù‚ÙˆØ©.</p>
                <span>Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ø®Ø¯Ù…Ø© â†</span>
            </a>

            <a href="#" class="service-card" style="opacity: 0.5; pointer-events: none;">
                <h2>Ù‚Ø±ÙŠØ¨Ø§Ù‹..</h2>
                <p>Ø®Ø¯Ù…Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù‚Ø§Ø¯Ù…Ø© Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© ÙˆØ§Ø³Ø¹Ø© Ù…Ù† Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©.</p>
                <span>Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ø¬Ø¯Ø§Ù‹</span>
            </a>
        </section>

        <section class="reviews-section">
            <h2 style="text-align: center; font-size: 2rem; margin-bottom: 30px;">Ø¢Ø±Ø§Ø¡ Ø¹Ù…Ù„Ø§Ø¦Ù†Ø§ â­</h2>
            <div class="reviews-grid" id="reviewsGrid">
                <p style="text-align: center; color: var(--text-dim); grid-column: 1/-1;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª...</p>
            </div>
        </section>
    </main>

    <footer>
        <p>Â© 2026 Professional Game Services. All rights reserved.</p>
    </footer>

    <script type="module">
        import { auth, onAuthStateChanged } from './firebase-config.js';
        import { login, logout, isWorker, listenToWorkers, listenToRecentReviews, getUserRole, deleteReview } from './app.js';


        const refreshUserUI = () => {
            const user = auth.currentUser;
            if (user) {
                const userRole = getUserRole(user.email);
                const isStaff = !!userRole;
                const workerBadge = isStaff ? `<span class="worker-badge">${userRole === 'admin' ? 'Admin ğŸ‘‘' : 'Staff ğŸ›¡ï¸'}</span>` : '';
                const workersLink = isStaff
                    ? '<a href="workers.html" class="dropdown-item">âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>'
                    : '';

                userInfo.innerHTML = `
                    <div class="user-dropdown">
                        <div class="user-profile">
                            <img src="${user.photoURL}" class="user-avatar" loading="lazy">
                            <span class="user-name">${user.displayName} ${workerBadge}</span>
                        </div>
                        <div class="dropdown-menu">
                            ${workersLink}
                            <a href="#" class="dropdown-item" onclick="handleLogout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a>
                        </div>
                    </div>
                `;
            } else {
                userInfo.innerHTML = `<button class="auth-btn" id="loginBtn">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</button>`;
                const btn = document.getElementById('loginBtn');
                if (btn) btn.onclick = login;
            }
        };

        listenToWorkers(() => refreshUserUI());
        onAuthStateChanged(auth, () => refreshUserUI());

        window.handleLogout = logout;
        window.handleDeleteReview = async (id) => {
            if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ØŸ")) {
                const success = await deleteReview(id);
                if (!success) alert("ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ‚.");
            }
        };

        const reviewsGrid = document.getElementById('reviewsGrid');
        listenToRecentReviews((reviews) => {
            reviewsGrid.innerHTML = '';
            if (reviews.length === 0) {
                reviewsGrid.innerHTML = '<p style="text-align: center; color: var(--text-dim); grid-column: 1/-1;">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø¨Ø¹Ø¯. ÙƒÙ† Ø£ÙˆÙ„ Ù…Ù† ÙŠÙ‚ÙŠÙ…Ù†Ø§!</p>';
                return;
            }

            reviews.forEach(review => {
                const card = document.createElement('div');
                card.className = 'review-card';
                const stars = 'â­'.repeat(review.rating);

                const userRole = getUserRole(auth.currentUser?.email);
                const canDelete = userRole === 'owner' || userRole === 'admin';
                const deleteBtn = canDelete ? `<button onclick="handleDeleteReview('${review.id}')" style="background:none; border:none; color:#ff4d4d; font-size:0.7rem; cursor:pointer; margin-top:5px;">Ø­Ø°Ù ğŸ—‘ï¸</button>` : '';

                card.innerHTML = `
                    <div class="review-header">
                        <div style="display:flex; align-items:center; gap:12px;">
                            <img src="${review.userAvatar || 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'%23ccc\'%3E%3Cpath d=\'M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\'/%3E%3C/svg%3E'}" class="review-avatar" loading="lazy">
                            <div>
                                <div class="review-name">${review.userName.split(' ')[0]}</div>
                                <div class="review-stars">${stars}</div>
                            </div>
                        </div>
                        ${deleteBtn}
                    </div>
                    <div class="review-text">"${review.review || 'Ø®Ø¯Ù…Ø© Ù…Ù…ØªØ§Ø²Ø© ÙˆØ³Ø±ÙŠØ¹Ø© Ø¬Ø¯Ø§Ù‹ØŒ Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ…!'}"</div>
                    <div style="font-size: 0.7rem; color: var(--text-dim); margin-top:10px; text-align:left;">
                        ${review.ratedAt ? new Date(review.ratedAt.seconds * 1000).toLocaleDateString('ar-EG') : ''}
                    </div>
                `;
                reviewsGrid.appendChild(card);
            });
        });
    </script>

</body>

</html>